!function(e){function t(r){if(i[r])return i[r].exports;var o=i[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){!function(){if(!AFRAME)return void console.error("Component attempted to register before AFRAME was available.");var e={stereo:i(1).stereo_component,stereocam:i(1).stereocam_component};Object.keys(e).forEach(function(t){AFRAME.aframeCore?AFRAME.aframeCore.registerComponent(t,e[t]):AFRAME.registerComponent(t,e[t])})}()},function(e,t){e.exports={stereo_material:{schema:{eye:{type:"string",default:"left"},split:{type:"string",default:"horizontal"},orientation:{type:"string",default:"landscape"}},init:function(){this.object3D=this.el.object3D.children[0],this.isVideo=!1,this.videoClickHandlerAdded=!1,this.checkIfVideo();var e=this.getGeometry();e&&this.generateStereoTextures(e)},checkIfVideo:function(e){if(null!==this.el.getAttribute("material")&&"src"in this.el.getAttribute("material")&&""!==this.el.getAttribute("material").src){var e=this.el.getAttribute("material").src;"object"==typeof e&&"[object HTMLVideoElement]"==Object.prototype.toString.call(e)&&(this.isVideo=!0)}},getGeometry:function(){var e=new THREE.Geometry;return e.fromBufferGeometry(this.object3D.geometry)},generateStereoTextures:function(e){if("left"===this.data.eye)for(var t=e.faceVertexUvs[0],i="vertical"===this.data.split?"y":"x",r=0;r<t.length;r++)for(var o=0;o<3;o++)"x"==i?t[r][o][i]*=.5:(t[r][o][i]*=.5,t[r][o][i]+=.5);if("right"===this.data.eye)for(var t=e.faceVertexUvs[0],i="vertical"===this.data.split?"y":"x",r=0;r<t.length;r++)for(var o=0;o<3;o++)"x"==i?(t[r][o][i]*=.5,t[r][o][i]+=.5):t[r][o][i]*=.5;this.object3D.geometry=(new THREE.BufferGeometry).fromGeometry(e)},update:function(){"both"===this.data.eye?this.object3D.layers.set(0):this.object3D.layers.set("left"===this.data.eye?1:2)},tick:function(e){if(this.isVideo&&!this.videoClickHandlerAdded&&"undefined"!=typeof this.el.sceneEl.canvas){var t=this;t.videoEl=this.object3D.material.map.image,this.el.sceneEl.canvas.onclick=function(){t.videoEl.play()},this.videoClickHandlerAdded=!0}}},stereo_cam:{schema:{eye:{type:"string",default:"left"}},init:function(){this.layer_changed=!1},tick:function(e){var t=this.data;if(!this.layer_changed){var i=[];this.el.object3D.children.forEach(function(e,t,r){i[t]=e.type});var r=i.indexOf("PerspectiveCamera"),o=this.el.object3D.children[r];"both"===t.eye?(o.layers.enable(1),o.layers.enable(2)):o.layers.enable("left"===t.eye?1:2)}}}}}]);